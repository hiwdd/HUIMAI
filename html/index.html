<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../css/public.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <script src="../js/index_active.js"></script>
    <script src="../js/animate6.0.js"></script>
    <script src="../js/jquery.js"></script>
</head>

<body>
    <!-- 菜单 -->
    <div id="menu">
        <div class="core clearfix">
            <div id="notify" class="fl">
                <a href="#"><img src="../images/notify.jpg" /></a>公告：
                <p>紧急通知紧急通知</p>
            </div>
            <ul id="menu_list" class="fr">
                <li><a href="./register.html">注册</a></li>
                <li><a href="./login.html">登录</a></li>
                <li><a href="#">我的订单</a></li>
                <li><a href="#">我的关注</a></li>
                <li><a href="#">资讯</a></li>
                <li><a href="#">品牌库</a></li>
                <li><a href="#"><img src="../images/phone.jpg" /><span>手机惠买</span></a></li>
            </ul>
        </div>
    </div>
    <!-- logo-搜索-二维码 -->
    <div id="headbar">
        <div class="core flx">
            <div id="weblogo"><a href="#"><img src="../images/logo.jpg" /></a></div>

            <div class="search">
                <input type="text" placeholder="请输入商品名称或货号">
                <button>搜索</button>
            </div>

            <div id="qrcode">
                <a href="#">
                    <p class="fl">下载APP&nbsp;&nbsp;<br />立即拼团享实惠</p><img src="../images/qr.jpg" />
                </a>
            </div>
        </div>
    </div>
    <!-- 商品导航 -->
    <div id="nav">
        <div class="core">
            <ul class="nav nav-pills">
                <li role="presentation"><a href="#">首页</a></li>
                <li role="presentation"><a href="#">视频</a></li>
                <li role="presentation"><a href="#">品质厨房</a></li>
                <li role="presentation"><a href="#">美食民生</a></li>
                <li role="presentation"><a href="#">健康生活</a></li>
                <li role="presentation"><a href="#">魅力穿戴</a></li>
                <li role="presentation"><a href="#">珠宝收藏</a></li>
                <li role="presentation"><a href="#">美肤靓装</a></li>
                <li role="presentation" id="classify"><a href="#"><img
                            src="../images/sub_nav_lf.jpg" /><span>在线分类</span><img src="../images/sub_nav_rt.jpg" /></a>
                </li>
                <div id="wrap">

                    <div class="cook">
                        <h3><img src="../images/c1.png" />品质厨房</h3>
                        <a href="">烹制厨具</a><br>
                        <a href="">厨房电器</a><br>
                        <a href="">餐饮用具</a><br>
                        <a href="">厨房配件</a>
                    </div>

                    <div class="food">
                        <h3><img src="../images/c2.png" />美食·民生</h3>
                        <a href="">进口食品</a><br>
                        <a href="">滋补养生</a><br>
                        <a href="">休闲食品</a><br>
                        <a href="">粮油干货</a><br>
                        <a href="">酒水茶饮</a><br>
                        <a href="">跨境直邮</a><br>
                        <a href="">保健食品</a><br>
                        <a href="">生鲜食品</a><br>
                    </div>

                    <div class="life">
                        <h3><img src="../images/c3.png" />健康生活</h3>
                        <a href="">优质睡眠</a><br>
                        <a href="">收纳用品</a><br>
                        <a href="">生活日用</a><br>
                        <a href="">生活小电</a><br>
                        <a href="">装饰/家具</a><br>
                        <a href="">健身/户外</a><br>
                        <a href="">生活大电</a><br>
                    </div>

                    <div class="clothes">
                        <h3><img src="../images/c4.png" />魅力穿戴</h3>
                        <a href="">女装</a><br>
                        <a href="">男装</a><br>
                        <a href="">内衣</a><br>
                        <a href="">箱包</a><br>
                        <a href="">鞋靴</a><br>
                        <a href="">配饰</a><br>
                        <a href="">户外鞋服</a><br>
                    </div>

                    <div class="jewelry">
                        <h3><img src="../images/c5.png" />珠宝收藏</h3>
                        <a href="">翡翠玉石</a><br>
                        <a href="">宝石珍珠</a><br>
                        <a href="">水晶玛瑙</a><br>
                        <a href="">时尚饰品</a><br>
                        <a href="">钟表</a><br>
                        <a href="">文化收藏</a><br>
                    </div>

                    <div class="cosmetics" style="border-right: none;">
                        <h3><img src="../images/c6.png" />美肤靓妆</h3>
                        <a href="">面部护理</a><br>
                        <a href="">洗护护理</a><br>
                        <a href="">美容仪器</a><br>
                        <a href="">身体护理</a><br>
                        <a href="">彩妆香水</a><br>
                    </div>

                </div>
            </ul>
        </div>
    </div>

    <div id="banner">
        <ul class="bannerUl clearfix">
            <li><a href="#" class="runbo"><img src="../images/banner1.jpg" alt="惠买"></a></li>
        </ul>
        <div class="pnn">
            <div class="prev pn">&lt;</div>
            <div class="next pn">&gt;</div>
            <div class="yuandian"><a href="#" class="yuan"></a><a href="#"></a></div>
        </div>
    </div>
    <div id="content">
        <div class="container">
            <ul class="tv">
                <li class="fl"><i><img src="../images/red.gif" alt="惠买"></i><strong><b>TV</b>直播</strong>上惠买APP，拼着买更便宜
                </li>
                <li class="fr"><a href="#"><img src="../images/jmb.jpg" alt="惠买"></a></li>
            </ul>
            <div class="zhibo">
                <a href="#">
                    <img src="../images/pic1.jpg" alt="惠买">
                    <p>美国西屋营养萃取破壁机</p>
                    <p><em>￥599</em><i>￥699</i></p>
                    <iframe src="./setinteval.html" frameborder="0" style="position:absolute;top:44px;left:50px;"
                        width="200px" height="30px" scrolling="no"></iframe>
                </a>
                <a href="#">
                    <img src="../images/pic1.jpg" alt="惠买">
                    <p>美国西屋营养萃取破壁机</p>
                    <p><em>￥599</em><i>￥699</i></p>
                    <iframe src="./setinteval.html" frameborder="0" style="position:absolute;top:44px;left:50px;"
                        width="200px" height="30px" scrolling="no"></iframe>
                </a>
                <a href="#">
                    <img src="../images/pic1.jpg" alt="惠买">
                    <p>美国西屋营养萃取破壁机</p>
                    <p><em>￥599</em><i>￥699</i></p>
                    <iframe src="./setinteval.html" frameborder="0" style="position:absolute;top:44px;left:50px;"
                        width="200px" height="30px" scrolling="no"></iframe>
                </a>
            </div>
            <h3 class="jr"><img src="../images/red.gif" alt="惠买"><em>今日</em>必抢</h3>
            <div class="biqiang">
                <div class="bi-left fl">
                    <a href="#"><img src="../images/biqiang.jpg" alt="惠买"></a>
                </div>
                <div class="bi-right fr">
                    <a href="#">
                        <img src="../images/pic2.jpg" alt="惠买">
                        <p>
                            洲泉100%优质双宫茧箐松皓月桑蚕长丝被200*230cm·500g·强韧长丝！夏季好被！国标优等！ 玫瑰红
                        </p>
                        <p><em>￥359</em><i>￥699</i></p>
                        <div class="now">马上抢</div>
                    </a>
                    <a href="#">
                        <img src="../images/pic2.jpg" alt="惠买">
                        <p>
                            洲泉100%优质双宫茧箐松皓月桑蚕长丝被200*230cm·500g·强韧长丝！夏季好被！国标优等！ 玫瑰红
                        </p>
                        <p><em>￥359</em><i>￥699</i></p>
                        <div class="now">马上抢</div>
                    </a>
                    <a href="#">
                        <img src="../images/pic2.jpg" alt="惠买">
                        <p>
                            洲泉100%优质双宫茧箐松皓月桑蚕长丝被200*230cm·500g·强韧长丝！夏季好被！国标优等！ 玫瑰红
                        </p>
                        <p><em>￥359</em><i>￥699</i></p>
                        <div class="now">马上抢</div>
                    </a>
                </div>
            </div>


            <!-- 瀑布流 -->
            <h3 class="huixuanBar"><span>惠买优选</span></h3>
            <div id="publiu">
                <ul>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
        </div>
    </div>
    <iframe src="./footer.html" frameborder="0" width="100%" height="458px" scrolling="no"></iframe>
    <iframe src="./sidebar.html" frameborder="0" height="60%" style="position:fixed;bottom:0;right:0;"></iframe>
</body>

</html>
<script src="../js/ajax.js"></script>
<script>
    //进入详情页
    $(function () {
        $(".zhibo,.biqiang>div").on("click", "a", function () {
            var imgsrc = $(this).find("img").attr("src");
            var title = $(this).find("p").eq(0).text();
            var price = $(this).find("p").eq(1).text();
            // console.log(title,price);
            location.href = "./xq.php?imgsrc="+imgsrc+"&title="+title+"&price="+price;
        })
        $("#publiu>ul").on("click", "li", function () {
            var imgsrc = $(this).find("img").attr("src");
            location.href = "./xq.php?imgsrc="+imgsrc+"&title="+title+"&price="+price;
        })
    });

    //banner轮播
    $(function () {
        var timer = null;
        var index = 0;
        timer = setInterval(autoPlay, 2000);

        function autoPlay() {
            if (index == 2) {
                index = 1;
            } else {
                index++;
            }
            $(".bannerUl .runbo img").attr("src", "../images/banner" + index + ".jpg");
            $("#banner .pnn .yuandian a").eq(index - 1).addClass("yuan").siblings().removeClass("yuan");
        }

        $("#banner").on("mouseover", function () {
            $(".pn").fadeIn("slow");
            clearInterval(timer);
            // alert(111);
        })
        $("#banner").on("mouseout", function () {
            $(".pn").fadeOut("slow");
            timer = setInterval(autoPlay, 2000);
        })
        $(".prev").on("click", function () {
            if (index == 0) {
                index = 2;
            } else if (index == 1) {
                index = 2;
            } else {
                index--;
            }
            $(".bannerUl .runbo img").attr("src", "../images/banner" + index + ".jpg");
            $("#banner .pnn .yuandian a").eq(index - 1).addClass("yuan").siblings().removeClass("yuan");
        })
        $(".next").on("click", function () {
            if (index == 0) {
                index = 2;
            } else if (index == 2) {
                index = 1;
            } else {
                index++;
            }
            $(".bannerUl .runbo img").attr("src", "../images/banner" + index + ".jpg");
            $("#banner .pnn .yuandian a").eq(index - 1).addClass("yuan").siblings().removeClass("yuan");
        })
    })




    var banUl = document.getElementsByClassName("bannerUl")[0];


    //瀑布流
    var ul = document.getElementById("publiu").firstElementChild;
    var list = ul.getElementsByTagName("li");

    //默认加载
    loadImg();

    function loadImg() {
        $.getJSON("./hmyx.json", function (data) {
            for (var i = 0; i < list.length; i++) {
                if (data[i]) {
                    // console.log(data[i]);
                    //pic
                    var img = document.createElement("img");
                    img.src = data[i].src;
                    list[i].appendChild(img);

                    //info
                    list[i].appendChild(add_info(data[i]));

                } else {
                    var p = document.createElement("p");
                    p.innerText = "no more to see";
                    list[i].appendChild(p);
                }
            }
        });
    }

    document.onscroll = function () {
        var ch = document.documentElement.clientHeight;
        var sh = document.documentElement.scrollTop;
        //获取窗口滚走距离scrolltop
        //是否大于document.body.scrollHeight
        if (sh + ch >= document.body.scrollHeight) {
            $.getJSON("./hmyx.json", function (data) {
                // console.log(list.length);
                if (data.length <= list.length) {
                    //alert("no more goods");
                    return;
                } else {
                    for (var i = list.length; i < data.length; i++) {
                        if (data[i]) {
                            var newli = document.createElement("li");
                            var img = document.createElement("img");
                            img.src = data[i].src;
                            newli.appendChild(img);

                            newli.appendChild(add_info(data[i]));
                            ul.appendChild(newli);

                        } else {
                            alert("no more goods");
                            return;
                        }
                    }
                }

            });
        }
    }


    function add_info(arr) {
        var div = document.createElement("div");
        div.className = "info";
        // list[i].appendChild(div);
        var h4 = document.createElement("h4");
        h4.innerHTML = arr.content;
        // console.log(data[i].content);
        div.appendChild(h4);

        var sub_div = document.createElement("div");
        sub_div.className = "sub_info";

        var span1 = document.createElement("span");
        span1.className = "price_tag";
        // console.log(data[i].price);
        span1.innerHTML = "￥" + arr.price;

        sub_div.appendChild(span1);

        var span2 = document.createElement("span");
        span2.className = "numb";
        var str = `<b>${arr.num}</b>人已购买`;
        span2.innerHTML = str;

        sub_div.appendChild(span2);
        div.appendChild(sub_div);
        // list[i].appendChild(div);

        return div;
    }

    //给在线分类添加二级菜单
    $(function () {
        $("#nav #classify,#nav #wrap").mouseover(function () {
            $("#wrap").show();
        })
        $("#nav #classify,#nav #wrap").mouseout(function () {
            $("#wrap").hide();
        })

    })
</script>